var CommonToast = (function () {
  'use strict';
  var n = 'darktheme';
  function t() {
    var e, t;
    (e = function () {
      var t = (document.body.getAttribute('class') || '').split(' ');
      if (/QYStyleModel\/\(dark\)/i.test(navigator.userAgent))
        -1 === t.indexOf(n) && t.push(n);
      else {
        for (var e = [], i = 0; i < t.length; i++) t[i] !== n && e.push(t[i]);
        t = e;
      }
      document.body.setAttribute(
        'class',
        t.join(' ').replace(/^\s+|\s+$/g, ''),
      );
    }),
      'complete' === document.readyState ||
      ('loading' !== document.readyState && !document.documentElement.doScroll)
        ? e()
        : ((t = function t() {
            document.removeEventListener('DOMContentLoaded', t, !1),
              window.removeEventListener('load', t, !1),
              e();
          }),
          document.addEventListener('DOMContentLoaded', t, !1),
          window.addEventListener('load', t, !1));
  }
  function e(e) {
    var t,
      i,
      n,
      s =
        (((n = document.createElement('div')).innerHTML =
          '\n    \x3c!-- toast structure --\x3e\n    <div class="m-norm-toast-cover hide">\n        \x3c!-- toast fade in css:toast-fadeIn; fade out css:toast-fadeOut --\x3e\n        <div class="m-norm-toast">\n            \x3c!-- single toast --\x3e\n            <div class="info hide">\n                \x3c!-- fade out css:toast-icon-fadeOut --\x3e\n                <i class="icon-loading"></i>\n                \x3c!-- text fade in css:toast-txt-fadeIn; fade out css:toast-txt-fadeOut --\x3e\n                <span class="info-txt"></span>\n            </div>\n            \x3c!-- multipart toast --\x3e\n            <div class="info hide">\n                <div class="info-anime">\n                    <div class="inner">\n                        \x3c!-- default show loading; if success add css img_success, else add css img_failed --\x3e\n                        <div class="img_loading"></div>\n                    </div>\n                </div>\n                \x3c!-- text fade in css:toast-txt-fadeIn; fade out css:toast-txt-fadeOut --\x3e\n                \x3c!-- multipart text add one or more<i class="c-txt">{{content}}</i> into span --\x3e\n                <span class="info-txt squ-txt"></span>\n            </div>\n        </div>\n    </div>'),
        document.body.appendChild(n),
        n);
    (t = function (t) {
      t || console.log('warning: css load failed.'), e(s);
    }),
      (i =
        location.protocol +
        '//static.iqiyi.com/css/20210420/h5-baseNorm-vip.css'),
      (n = document.createElement('link')).setAttribute('rel', 'stylesheet'),
      n.setAttribute('type', 'text/css'),
      n.setAttribute('href', i),
      (i = document.getElementsByTagName('head')).length
        ? i[0].insertBefore(n, i[0].firstChild)
        : document.documentElement.appendChild(n),
      (n.onload = function () {
        t(!0);
      }),
      (n.onerror = function () {
        t(!1);
      });
  }
  /android/i.test(navigator.userAgent) &&
    (t(),
    document.addEventListener('visibilitychange', function () {
      document.hidden || t();
    }));
  var m =
      'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
        ? function (t) {
            return typeof t;
          }
        : function (t) {
            return t &&
              'function' == typeof Symbol &&
              t.constructor === Symbol &&
              t !== Symbol.prototype
              ? 'symbol'
              : typeof t;
          },
    i = function (t, e) {
      if (!(t instanceof e))
        throw new TypeError('Cannot call a class as a function');
    };
  function s(t, e) {
    for (var i = 0; i < e.length; i++) {
      var n = e[i];
      (n.enumerable = n.enumerable || !1),
        (n.configurable = !0),
        'value' in n && (n.writable = !0),
        Object.defineProperty(t, n.key, n);
    }
  }
  var a =
    ((function (t, e, i) {
      return e && s(t.prototype, e), i && s(t, i), t;
    })(o, [
      { key: '_successCallback', value: function () {} },
      { key: '_failedCallback', value: function () {} },
      { key: '_doneCallback', value: function () {} },
      {
        key: 'then',
        value: function (t) {
          return (
            t instanceof Function &&
              ((this._successCallback = t),
              1 === this.status &&
                (this._successCallback.call(this, this), (this.status = null))),
            this
          );
        },
      },
      {
        key: 'fail',
        value: function (t) {
          return (
            t instanceof Function &&
              ((this._failedCallback = t),
              -1 === this.status &&
                (this._failedCallback.call(this, this), (this.status = null))),
            this
          );
        },
      },
      {
        key: 'complete',
        value: function (t) {
          return (
            t instanceof Function &&
              ((this._doneCallback = t),
              2 === this.status &&
                (this._doneCallback.call(this, this), (this.status = null))),
            this
          );
        },
      },
      {
        key: 'resolve',
        value: function (t, e) {
          0 === this.status &&
            ((this.status = 1),
            t instanceof Function && ((e = t), (t = null)),
            this._successCallback.call(this, this, t, e));
        },
      },
      {
        key: 'reject',
        value: function (t, e) {
          0 === this.status &&
            ((this.status = -1),
            t instanceof Function && ((e = t), (t = null)),
            this._failedCallback.call(this, this, t, e));
        },
      },
      {
        key: 'done',
        value: function (t) {
          0 === this.status &&
            ((this.status = 2), this._doneCallback.call(this, this, t));
        },
      },
    ]),
    o);
  function o() {
    i(this, o), (this.status = 0);
  }
  var r,
    l = (function () {
      var t = void 0,
        e = document.createElement('fakeelement'),
        i = {
          animation: 'animationend|animationiteration',
          WebkitAnimation: 'webkitAnimationEnd|webkitAnimationIteration',
          MozAnimation: 'mozAnimationEnd|mozAnimationIteration',
          MSAnimation: 'MSAnimationEnd|MSAnimationIteration',
          OAnimation: 'oAnimationEnd|oAnimationIteration',
        };
      for (t in i)
        if (i.hasOwnProperty(t) && void 0 !== e.style[t]) return i[t];
      return i.animation;
    })().split('|'),
    u = l[0],
    c = l[1],
    d = {
      init: !1,
      running: !1,
      future: null,
      property: null,
      container: null,
      root: null,
      outline: null,
      single: {},
      multipart: {},
      delayParameter: null,
      delayFuture: null,
      events: [],
      onComplete: function (t) {
        (this.init = !0),
          (this.container = t),
          (this.root = t.children[0]),
          (this.outline = this.root.children[0]),
          (this.single = {
            root: this.outline.children[0],
            loading: this.outline.children[0].children[0],
            text: this.outline.children[0].children[1],
          }),
          (this.multipart = {
            root: this.outline.children[1],
            loading: this.outline.children[1].querySelector('.img_loading'),
            text: this.outline.children[1].children[1],
          }),
          this.delayParameter &&
            (this.showToast.apply(
              this,
              (function (t) {
                if (Array.isArray(t)) {
                  for (var e = 0, i = Array(t.length); e < t.length; e++)
                    i[e] = t[e];
                  return i;
                }
                return Array.from(t);
              })(this.delayParameter),
            ),
            (this.delayParameter = null));
      },
      addClass: function (t, e) {
        return (
          'string' == typeof e &&
            -1 === t.className.indexOf(e) &&
            (t.className = t.className + ' ' + e),
          this
        );
      },
      removeClass: function (t, e) {
        return (
          'string' == typeof e &&
            -1 !== t.className.indexOf(e) &&
            (t.className = t.className
              .split(/\s+/g)
              .map(function (t) {
                return t === e ? '' : t;
              })
              .join(' ')
              .replace(/^\s+|\s+$/g, '')
              .replace(/(\s)+/g, '$1')),
          this
        );
      },
      one: function (e, i, n) {
        function s(t) {
          t.stopPropagation(),
            e.removeEventListener(i, s),
            (e = null),
            n instanceof Function && o === a.future && n.call(a);
        }
        var a = this;
        this.events.push({ dom: e, eventName: i, callback: n });
        var o = this.future;
        e.addEventListener(i, s);
      },
      reset: function () {
        this.removeClass(this.outline, 'toast-fadeIn'),
          this.removeClass(this.outline, 'toast-fadeOut'),
          this.addClass(this.single.root, 'hide'),
          this.removeClass(this.single.loading, 'hide'),
          this.removeClass(this.single.loading, 'toast-icon-fadeOut'),
          this.removeClass(this.single.text, 'toast-txt-fadeIn'),
          this.removeClass(this.single.text, 'toast-txt-fadeOut'),
          (this.single.text.innerHTML = ''),
          this.addClass(this.multipart.root, 'hide'),
          this.removeClass(this.multipart.loading, 'img_success'),
          this.removeClass(this.multipart.loading, 'img_failed'),
          this.removeClass(this.multipart.text, 'toast-txt-fadeIn'),
          this.removeClass(this.multipart.text, 'toast-txt-fadeOut');
        for (var t = this.multipart.text.children.length - 1; 0 <= t; t--)
          this.multipart.text.removeChild(this.multipart.text.children[t]);
        this.future = null;
        for (var e = 0, i = this.events.length; e < i; e++) {
          var n = this.events[e];
          n.dom.removeEventListener(n.eventName, n.callback);
        }
        this.running = !1;
      },
      regularProperty: function () {
        var t = {
          type: 0,
          showLoading: !0,
          loadingText: '',
          completeText: '',
          failText: '',
          maxTime: 3e3,
        };
        if (0 === arguments.length) return t;
        var e = void 0,
          i = void 0,
          n = void 0,
          s = void 0,
          a = void 0,
          o = void 0,
          r = void 0,
          l = arguments[0];
        if ('[object Object]' === Object.prototype.toString.call(l))
          (e = l.type),
            (i = l.showLoading),
            (n = l.loadingText),
            (s = l.completeText),
            (o = l.maxTime),
            (a = l.failText),
            (r = l.callback);
        else {
          for (
            var u = [
                { type: 'number' },
                { type: 'boolean' },
                { type: 'string|object' },
                { type: 'string|object' },
                { type: 'string|object' },
                { type: 'number' },
              ],
              c = 0,
              d = Math.min(arguments.length, 5);
            c < d;
            c++
          )
            for (var h = arguments[c], f = 0; f < u.length; f++)
              if (
                void 0 === u[f].value &&
                0 <= u[f].type.indexOf(void 0 === h ? 'undefined' : m(h))
              ) {
                u[f].value = h;
                break;
              }
          (e = u[0].value),
            (i = u[1].value),
            (n = u[2].value),
            (s = u[3].value),
            (a = u[4].value),
            (o = u[5].value);
        }
        return (
          'number' != typeof e || (0 !== e && 1 !== e) || (t.type = e),
          'boolean' == typeof i && (t.showLoading = i),
          ('string' != typeof n && !Array.isArray(n)) ||
            (0 === t.type && Array.isArray(n) && (n = n.join('</br>')),
            (t.loadingText = n)),
          ('string' != typeof s && !Array.isArray(s)) ||
            (0 === t.type && Array.isArray(s) && (s = s.join('</br>')),
            (t.completeText = s)),
          ('string' != typeof a && !Array.isArray(a)) ||
            (0 === t.type && Array.isArray(a) && (a = a.join('</br>')),
            (t.failText = a)),
          'number' == typeof o && (t.maxTime = o),
          0 === t.showLoading && (t.completeText = t.loadingText),
          (t.callback = r),
          t
        );
      },
      showToast: function () {
        var n = this,
          t = new a();
        return this.init
          ? (this.delayFuture &&
              ((t = this.delayFuture), (this.delayFuture = null)),
            this.running && this.reset(),
            (this.future = t),
            (this.property = this.regularProperty.apply(this, arguments)),
            (this.running = !0),
            this.setToast('start'),
            this.startAnimation(),
            this.future
              .then(function (t, e, i) {
                t === n.future && n.successAnimation(e, i);
              })
              .fail(function (t, e, i) {
                t === n.future && n.failAnimation(e, i);
              })
              .complete(function (t, e) {
                t === n.future && n.endAnimation(e);
              }),
            this.future)
          : ((this.delayParameter = [].slice.apply(arguments)),
            (this.delayFuture = t));
      },
      setToast: function (t) {
        var e = this;
        if (this.property.showLoading) {
          var i = '',
            i =
              'start' === t
                ? this.property.loadingText
                : 'end' === t
                ? this.property.completeText
                : this.property.failText;
          if (0 === this.property.type)
            this.removeClass(this.single.root, 'hide'),
              (this.single.text.innerHTML = i.split('|').join('</br>'));
          else {
            this.removeClass(this.multipart.root, 'hide');
            for (
              var n = '',
                s = 0,
                a = (i = !Array.isArray(i) ? i.split('|') : i).length;
              s < a;
              s++
            )
              n += '<i class="c-txt\'>' + i[s] + '</i>';
            this.multipart.text.innerHTML = n;
          }
        } else {
          this.removeClass(this.single.root, 'hide'),
            this.addClass(this.single.loading, 'hide'),
            (this.single.text.innerHTML = this.property.loadingText
              .split('|')
              .join('</br>'));
          var o = this.future;
          setTimeout(function () {
            o.done(e.property.callback);
          }, this.property.maxTime);
        }
      },
      startAnimation: function () {
        var t = this;
        this.removeClass(this.root, 'hide'),
          this.addClass(this.outline, 'toast-fadeIn'),
          this.one(this.outline, u, function () {
            t.removeClass(t.outline, 'toast-fadeIn');
          });
      },
      successAnimation: function (t, e) {
        t &&
          ('string' == typeof t
            ? (this.property.completeText = t)
            : Array.isArray(t) && (this.property.completeText = t.join('|'))),
          this.middleAnimation('success', e);
      },
      failAnimation: function (t, e) {
        t &&
          ('string' == typeof t || Array.isArray(t)) &&
          (this.property.failText = t),
          this.middleAnimation('fail', e);
      },
      middleAnimation: function (t, e) {
        var i = this;
        this.property.showLoading &&
          (1 === this.property.type
            ? this.changeLoadingAnimation(t, function () {
                i.endAnimation(e);
              })
            : (this.addClass(this.single.loading, 'toast-icon-fadeOut'),
              this.one(this.single.loading, u, function () {
                i.removeClass(i.single.loading, 'toast-icon-fadeOut'),
                  i.addClass(i.single.loading, 'hide');
              }),
              this.changeTextAnimation(t, function () {
                i.endAnimation(e);
              })));
      },
      changeLoadingAnimation: function (t, e) {
        var i = this,
          n = '',
          n = 'success' === t ? 'img_success' : 'img_failed';
        this.one(this.multipart.loading, c, function () {
          i.addClass(i.multipart.loading, n),
            i.changeTextAnimation(t),
            i.one(i.multipart.loading, u, function () {
              e instanceof Function && e.call(i);
            });
        });
      },
      changeTextAnimation: function (t, e) {
        var i = this,
          n = void 0,
          n = (0 === this.property.type ? this.single : this.multipart).text;
        this.addClass(n, 'toast-txt-fadeOut'),
          this.one(n, u, function () {
            'success' === t ? i.setToast('end') : i.setToast('fail'),
              i.removeClass(n, 'toast-txt-fadeOut'),
              i.addClass(n, 'toast-txt-fadeIn'),
              i.one(n, u, function () {
                e instanceof Function && e.call(i);
              });
          });
      },
      endAnimation: function (t) {
        var e = this;
        this.addClass(this.outline, 'toast-fadeOut'),
          this.one(this.outline, u, function () {
            e.reset(),
              e.addClass(e.root, 'hide'),
              t instanceof Function && t.call();
          });
      },
      closeToast: function () {
        this.reset(), this.addClass(this.outline, 'hide');
      },
    };
  return (
    (r = d.onComplete.bind(d)),
    'interactive' !== document.readyState && 'complete' !== document.readyState
      ? document.addEventListener('DOMContentLoaded', function () {
          e(r);
        })
      : e(r),
    {
      showTextToast: function (t, e, i) {
        e instanceof Function
          ? ((i = e), (e = void 0))
          : isNaN(parseInt(e)) && (e = void 0),
          d.showToast({
            showLoading: !1,
            loadingText: t,
            maxTime: e,
            callback: i,
          });
      },
      showLineLoadingToast: function (t, e, i) {
        return d.showToast(0, !0, t, e, i);
      },
      showBoxLoadingToast: function (t, e, i) {
        return d.showToast(1, !0, t, e, i);
      },
    }
  );
})();
